# Oya Tic Tac Toe (Flutter App)

The Flutter application for Oya Tic Tac Toe, a multi-platform game featuring classic and meta Tic Tac Toe modes.

## Overview

This is the main Flutter application package that provides the UI and platform-specific implementations for the Oya Tic Tac Toe game. It uses the `oya_ttt_core` package for all game logic and AI.

## Features

- **Cross-Platform Support:** iOS, Android, Web, Windows, macOS, and Linux
- **Responsive Design:** Adapts to different screen sizes (mobile, tablet, desktop)
- **State Management:** Uses Riverpod for reactive state management
- **Local Database:** Drift (SQLite) for persisting user profiles and game history
- **Internationalization:** Built-in support for multiple languages (English, French)
- **Custom UI:** Beautiful themes with custom fonts, backgrounds, and character designs
- **Fragment Shaders:** Visual effects using custom GLSL shaders

## Architecture

### Key Dependencies

- **flutter_riverpod** - State management
- **go_router** - Navigation and routing
- **drift** - Type-safe SQLite database
- **path_provider** - Platform-specific directory paths
- **shared_preferences** - Simple key-value storage

### Project Structure

```
lib/
├── features/          # Feature-based modules
│   ├── game/         # Game screen and logic
│   ├── home/         # Home screen
│   ├── onboarding/   # First-time user experience
│   ├── edit_user/    # User profile editing
│   └── ...
├── services/         # Platform services
│   ├── database/    # Drift database setup
│   └── logging.dart
├── state/           # Riverpod providers
├── theme/           # Theme configuration
├── widgets/         # Reusable UI components
├── l10n/           # Localization files
├── main.dart       # App entry point
└── router.dart     # Navigation configuration
```

## Getting Started

### Prerequisites

- Flutter SDK 3.9.2 or higher
- For iOS: Xcode and CocoaPods
- For Android: Android Studio or Android SDK
- For Web: Chrome or another modern browser
- For Desktop: Platform-specific build tools

### Installation

1. Navigate to the package directory:
```bash
cd packages/oya_ttt
```

2. Install dependencies:
```bash
flutter pub get
```

3. Generate code (for Drift database and localization):
```bash
flutter pub run build_runner build
```

### Running the App

```bash
flutter run
```

Or for a specific platform:
```bash
flutter run -d chrome        # Web
flutter run -d macos         # macOS
flutter run -d windows       # Windows
flutter run -d linux         # Linux
```

## Development

### Code Generation

This project uses code generation for:
- Database code (Drift)
- Localization files

Run the build runner when you modify:
- Database table definitions
- Localization ARB files

```bash
flutter pub run build_runner build
```

### Testing

Run all tests:
```bash
flutter test
```

Run snapshot tests (golden tests):
```bash
flutter test --update-goldens  # Update golden files
```

### Adding Localizations

1. Edit ARB files in `lib/l10n/`:
   - `app_en.arb` - English
   - `app_fr.arb` - French

2. The localization code is auto-generated by Flutter

### Adding Assets

Assets are organized in the `assets/` directory:
- `background/` - Background images
- `character/` - Character sprites
- `avatar/` - User avatar images
- `fonts/` - Custom fonts

Remember to declare new assets in `pubspec.yaml` under the `assets` section.

## Building for Production

### Android
```bash
flutter build apk --release
flutter build appbundle --release
```

### iOS
```bash
flutter build ios --release
```

### Web
```bash
flutter build web --release
```

### Desktop
```bash
flutter build windows --release
flutter build macos --release
flutter build linux --release
```

## Troubleshooting

### Database Issues
If you encounter database errors, try clearing the app data or reinstalling.

### Build Runner Issues
Clean and rebuild:
```bash
flutter clean
flutter pub get
flutter pub run build_runner build --delete-conflicting-outputs
```

## License

See the [LICENSE](../../LICENSE) file in the root of the repository.
